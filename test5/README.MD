# 实验5：图书管理系统数据库设计与界面设计

|学号|班级|姓名|
|:-------:|:-------------: | :----------:|
|201510421131|软件(本)15-2|郑涛|

## 1.数据库表设计
### 1.1 图书表

|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|ISBN|varchar(100)|主键|否|||  
|bookName|varchar(100)| |否|||
|author|varchar(100)| |否|||
|publish|varchar(100)| |否||出版社|
|price|float(100)| |否||| 
|order|int(100)| |是| |被预定的数目| 
|store|int(100)| |是| |库存|  
|type|int(100)| |是| |类型|  

### 1.2 读者表
|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|readerId|varchar(100)|主键|否|||
|username|varchar(100)| |否|||  
|password|varchar(100)| |否|||
|brow|int(100)| | 是| |已借书目数|
|max|int(100)| | 是| |最大可借数|

### 1.3 图书管理员表

|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|adminId|varchar(100)|主键|否|||
|username|varchar(100)| |否|||  
|password|varchar(100)| |否|||
 

### 1.4 超级管理员表

|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|sAdminId|varchar(100)|主键|否|||
|username|varchar(100)| |否|||  
|password|varchar(100)| |否|||

### 1.5 借阅记录表
|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|id|int(100)|主键|否|||
|readerId|varchar(100)|外键|否|||  
|ISBN|varchar(100)|外键|否|||
|date|varchar(100)| | 否|||  

### 1.6预约表
|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|id|int(100)|主键|否|||
|readerId|varchar(100)|外键|否|||  
|ISBN|varchar(100)|外键|否|||
|date|varchar(100)| |否| |日期|  
|num|varchar(100)| |否| |预约数目|  
### 1.7 逾期记录表
|字段|类型|主键，外键|可以为空|约束|说明|
|:-------:|:-------------:|:------:|:----:|:---:|:-----|    
|id|int(100)|主键|否|||
|readerId|varchar(100)|外键|否|||  
|ISBN|varchar(100)|外键|否|||
|date|varchar(100)| |否 | |日期|  
|dateNum|varchar(100)| | 是| |逾期天数|
|beyondNum|int(100)| | 否| | 逾期一天罚款数额|
|money|int(100)| | 是|dateNum*beyondNum| 罚款数额|

## 2. 界面设计
### 2.1. 图书管理界面设计
![](book.png  "界面" )
- 用例图参见：图书管理设计用例
- 类图参见：图书类
- 顺序图参见：图书管理设计顺序图
- API接口如下：
1. addBook接口

- 功能：用于添加图书
- 接口服务于： http://localhost:8080
- 请求地址： http://localhost:8080/Library/add/
- 请求方法：post
- 请求参数：book(JavaBean)

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|book|是|读者类对象 |


- 返回实例：
```
{
    "code": 200,
    "data": {
            "ISBN": "9787302329824",
             "bookName": "softWare",
             "author": "Tom",
             "publish": "People's Publishing",
             "price": 50,
             "order": 2,
             "store": 30,
             "type": "soft",
            "flag":true,
     },
    "msg": "响应成功"
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|msg|请求响应结果|
|data|图书信息|
|code|返回码|
|flag|图书是否添加成功|

2. deleteBook接口

- 功能：用于删除指定图书
- 接口服务于： http://localhost:8080
- 请求地址： http://localhost:8080/Library/delete?id=Xxx
- 请求方法：post
- 请求参数：readerId(String)

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|ISBN|是|用于指定删除的图书 |


- 返回实例：
```
{
    "code": 200,
    "data": {
            "flag":true,
     },
    "msg": "响应成功"
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|msg|请求响应结果|
|data|响应信息|
|flag|读者是否删除成功|
|code|返回码|
3. updateBook接口

- 功能：用于修改指定图书
- 接口服务于： http://localhost:8080
- 请求地址： http://localhost:8080/Library/update?id=Xxx
- 请求方法：post
- 请求参数：Book(JavaBean)

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|Book|是|读者类对象 |


- 返回实例：
```
{
    "code": 200,
    "data": {
        "ISBN": "9787302329824",
        "bookName": "softWare",
        "author": "Tom",
        "publish": "People's Publishing",
        "price": 40,
        "order": 2,
        "store": 30,
        "type": "soft",
        "flag":true,
     },
    "msg": "响应成功"
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|msg|请求响应结果|
|data|图书信息|
|code|返回码|
|flag|图书是否修改成功|

4. getBook接口
- 功能：查询图书
- 接口服务于： http://localhost:8080
- 请求地址： http://localhost:8080/Library/get?id=Xxx
- 请求方法：get
- 请求参数：ISBN(String)

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|ISBN|是|用于指定查询的图书 |


- 返回实例：
```
{
    "code": 200,
    "data": {
            "ISBN": "9787302329824",
            "bookName": "softWare",
            "author": "Tom",
            "publish": "People's Publishing",
            "price": 50,
            "order": 2,
            "store": 30,
            "type": "soft",
     },
    "msg": "响应成功"
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|msg|请求响应结果|
|data|图书信息|
|code|返回码|



  


